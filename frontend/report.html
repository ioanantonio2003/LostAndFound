<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Report Item | Lost & Found</title>
    <link rel="stylesheet" href="report.css">
</head>

<body>
    <header>
        <nav class="navbar">
            <div class="logo">üìùReportüìù</div>
            <ul class="nav-links">
                <li><a href="/main.html">Main</a></li>
                <li><a href="/browse.html">Browse</a></li>
                <li><a href="#">My Items</a></li>
                <li><a href="/logout">Logout</a></li>
            </ul>
        </nav>
        <h1 class="motto"><u><i>üîçFind what you have lost. It was never that easyüîç</i></u></h1>
    </header>

    <div class="tabs">
        <div class="tab active" onclick="switchTab('lost')">Lost Item</div>
        <div class="tab" onclick="switchTab('found')">Found Item</div>
    </div>

    <div id="lost-tab" class="tab-content active">
        <div class="card-container">
            <div class="card">
                <h2>Find a Lost Item</h2>
                <p>Sometimes we don't pay attention to our things and we can easily forget about them. With a simple
                    search you can see if your lost object has been found by someone.</p>

                <form id="lostForm">
                    <div class="form-group">
                        <label for="lost-item-name">Item Name</label>
                        <input type="text" id="lost-item-name" placeholder="e.g., Blue Wallet, iPhone, Keys" required>
                    </div>

                    <div class="form-group">
                        <label for="lost-category">Category</label>
                        <select id="lost-category" required>
                            <option value="">Select a category</option>
                            <option value="Electronics">Electronics</option>
                            <option value="Wallet/Purse">Wallet/Purse</option>
                            <option value="Keys">Keys</option>
                            <option value="Jewelry">Jewelry</option>
                            <option value="Clothing">Clothing</option>
                            <option value="Documents">Documents</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="lost-location">Where did you lose it?</label>
                        <input type="text" id="lost-location" placeholder="e.g., Main Campus, Library, Cafeteria"
                            required>
                    </div>

                    <div class="form-group">
                        <label for="lost-date">When did you lose it?</label>
                        <input type="date" id="lost-date" required>
                    </div>

                    <div class="form-group">
                        <label for="lost-description">Description</label>
                        <textarea id="lost-description"
                            placeholder="Provide details about the item (color, brand, distinguishing features)"></textarea>
                    </div>

                    <div class="form-group">
                        <label>Upload Photo (Optional)</label>
                        <div class="photo-upload" onclick="document.getElementById('lost-photo').click()">
                            <p>Click to upload photo</p>
                            <input type="file" id="lost-photo" accept="image/*" style="display: none;"
                                onchange="previewImage(this, 'lost-preview')">
                            <img id="lost-preview" class="preview-image">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="lost-contact">Contact Information</label>
                        <input type="text" id="lost-contact" placeholder="Email" required>
                    </div>

                    <button type="submit" class="btn">Submit Report</button>
                    <button type="reset" class="btn btn-secondary">Cancel</button>
                </form>
            </div>
        </div>
    </div>
        
    <footer>
        <p>2025 Lost & Found | Contact: botanoffound@unitsurco | Instagram: @sessionsdromana</p>
    </footer>

    <script>
        // Switch between lost and found tabss
        function switchTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });

            document.getElementById(`${tabName}-tab`).classList.add('active');
            event.currentTarget.classList.add('active');
        }

        // Preview uploaded image
        function previewImage(input, previewId) {
            const preview = document.getElementById(previewId);
            const file = input.files[0];

            if (file) {
                const reader = new FileReader();

                reader.onload = function (e) {
                    preview.src = e.target.result;
                    preview.style.display = 'block';
                }

                reader.readAsDataURL(file);
            }
        }

        // Handle form submissions
        document.getElementById('lostForm').addEventListener('submit', function (e) {
            e.preventDefault();
            saveItem('lost');
        });
        //tapylyngosmalysuyere
        

        // Save item to localStorage and redirect to browse page
        function saveItem(type) {
            const formData = {
                type: type,
                name: document.getElementById(`${type}-item-name`).value,
                category: document.getElementById(`${type}-category`).value,
                location: document.getElementById(`${type}-location`).value,
                date: document.getElementById(`${type}-date`).value,
                description: document.getElementById(`${type}-description`).value,
                contact: document.getElementById(`${type}-contact`).value,
                timestamp: new Date().toISOString()
                
            };

            // Handle photo upload
            const photoInput = document.getElementById(`${type}-photo`);
            if (photoInput.files[0]) {
                const reader = new FileReader();
                reader.onload = function (e) {
                    formData.photo = e.target.result;
                    storeItem(formData);
                };
                reader.readAsDataURL(photoInput.files[0]);
            } else {
                storeItem(formData);
            }
        }

        function storeItem(item) {
            // Get existing items or initialize empty array
            const items = JSON.parse(localStorage.getItem('lostAndFoundItems')) || [];

            // Add new item
            items.push(item);

            // Save back to localStorage
            localStorage.setItem('lostAndFoundItems', JSON.stringify(items));

            // Redirect to browse page
            window.location.href = 'browse.html';
        }
    </script>
</body>

</html>